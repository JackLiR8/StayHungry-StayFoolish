<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>动态组件</title>
</head>
<body>
    <div id="app">
        <button @click='index=page1'>page1</button>
        <button @click='index=page2'>page2</button>
        <button @click='index=page3'>page3</button>
        <keep-alive>
            <div :is='index'></div>
        </keep-alive>       
    </div>
    <script src="./vue.min.js"></script>
    <script>
        /* 
            动态组件：某个元素动态的挂载组件

                提升性能：
                组件缓存：切换出去的组件不销毁，而是缓存下来，下次切换时直接从缓存中取出组件，无需新建
                    实现方式：用keep-alive标签嵌套动态组件
                            缓存的组件会新增 activated 和 deactived 两个钩子函数
                            如果每次进入页面需要获取数据，则需要在activatd()中进行

                    有组件缓存的时候，首次显示组件时，会调用mounted()和activated(),离开组件时调用deactived();
                    再次切换时，显示的组件会调用activated(),离开的组件调用deactivated()

                    组件不缓存的时候，每次切换组件，将显示的组件都会调用mounted(),离开的组件会调用destroyed()

                keep-alive：
                    prop:
                        include: 字符串或者正则，匹配的组件会缓存
                        exclude: 字符串或者正则，匹配的组件不缓存
        */
        var page1 = {
            template:`<div><h2>page1</h2><input/></div>`,
            mounted() {
                console.log('page1挂载了')
            },
            activated(){
                console.log('page1激活了')
            },
            deactivated(){
                console.log('page1失活了')
            },
            destroyed() {
                console.log('page1销毁了')
            },
        }
        var page2 = {
            template:`<div><h2>page2</h2><input/></div>`,
            mounted() {
                console.log('page2挂载了')
            },
            activated(){
                console.log('page2激活了')
            },
            deactivated(){
                console.log('page2失活了')
            },
            destroyed() {
                console.log('page2销毁了')
            },
        }
        var page3 = {
            template:`<div><h2>page3</h2><input/></div>`,
            mounted() {
                console.log('page3挂载了')
            },
            activated(){
                console.log('page3激活了')
            },
            deactivated(){
                console.log('page3失活了')
            },
            destroyed() {
                console.log('page3销毁了')
            },
        }
        new Vue({
            el:'#app',
            data:{
                index:'page1'
            },
            components:{
                page1,
                page2,
                page3
            }
        })
    </script>
</body>
</html>